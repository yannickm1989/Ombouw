<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Depal</title>

<style>
body { font-family: Arial; margin: 0; background: #f5f5f5; }

.header {
    background: #e8f5e9;
    color: #2e7d32;
    padding: 12px 15px;
    display: flex;
    justify-content: space-between;
}

.app { max-width: 400px; margin: auto; padding: 15px; }

.back { text-decoration: none; color: #2e7d32; font-size: 14px; }

.switch-info, .row {
    background: white;
    border-radius: 6px;
    padding: 10px;
    margin-bottom: 10px;
}

.row { display: none; }
.row strong { display: block; font-size: 13px; color: #555; }
</style>
</head>

<body>

<div class="header">
    <h1>Depal</h1>
    <img src="ym.png" height="30">
</div>

<div class="app">
<a href="index.html" class="back">← Terug</a>

<div id="info" class="switch-info">Ombouw van … → …</div>

<div class="row" data-field="artikelnummer"><strong>Artikelnummer</strong><span></span></div>
<div class="row" data-field="blikinhoud"><strong>Blikinhoud</strong><span></span></div>
<div class="row" data-field="blik"><strong>Blik</strong><span></span></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyBtV-MNtSxf7mJ5RM5dS_5MeRdpcOMy6a4",
    authDomain: "productiedatabase.firebaseapp.com",
    projectId: "productiedatabase",
    storageBucket: "productiedatabase.firebasestorage.app",
    messagingSenderId: "269980901692",
    appId: "1:269980901692:web:642b70f033694811817e39"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const oudId = localStorage.getItem("productNu");
const nieuwId = localStorage.getItem("productNa");

const oud = (await getDoc(doc(db,"productiedatabase",oudId))).data();
const nieuw = (await getDoc(doc(db,"productiedatabase",nieuwId))).data();

info.innerText = `Ombouw van ${oud.omschrijving} → ${nieuw.omschrijving}`;

document.querySelectorAll(".row").forEach(r=>{
    const f=r.dataset.field;
    if(oud[f]||nieuw[f]){
        r.style.display="block";
        r.querySelector("span").innerText=`${oud[f]||"-"} → ${nieuw[f]||"-"}`;
    }
});
</script>

</body>
</html>
